(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"1lse":function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ApiClient=void 0;var i=n("SKd+"),s=n("HcV3"),a=n("wzb2"),c=n("uThP"),u=n("vQ6T"),h=function(){function t(t){var e,n,r;this._connectHandlers=[],this._disconnectHandlers=[],this._errorHandlers=[],this._endpointHandlers=[],this._eventHandlers=[],this._isConnected=!1,this._isConnecting=!1,this._shouldReconnect=!0,this.apiState=this._createClientCall("APIState"),this.authenticationToken=this._createClientCall("AuthenticationToken",3e5),this.authentication=this._createClientCall("Authentication"),this.statistics=this._createClientCall("Statistics"),this.vtsFolderInfo=this._createClientCall("VTSFolderInfo"),this.currentModel=this._createClientCall("CurrentModel"),this.availableModels=this._createClientCall("AvailableModels"),this.modelLoad=this._createClientCall("ModelLoad"),this.moveModel=this._createClientCall("MoveModel"),this.hotkeysInCurrentModel=this._createClientCall("HotkeysInCurrentModel"),this.hotkeyTrigger=this._createClientCall("HotkeyTrigger"),this.expressionState=this._createClientCall("ExpressionState"),this.expressionActivation=this._createClientCall("ExpressionActivation"),this.artMeshList=this._createClientCall("ArtMeshList"),this.colorTint=this._createClientCall("ColorTint"),this.sceneColorOverlayInfo=this._createClientCall("SceneColorOverlayInfo"),this.faceFound=this._createClientCall("FaceFound"),this.inputParameterList=this._createClientCall("InputParameterList"),this.parameterValue=this._createClientCall("ParameterValue"),this.live2DParameterList=this._createClientCall("Live2DParameterList"),this.parameterCreation=this._createClientCall("ParameterCreation"),this.parameterDeletion=this._createClientCall("ParameterDeletion"),this.injectParameterData=this._createClientCall("InjectParameterData"),this.getCurrentModelPhysics=this._createClientCall("GetCurrentModelPhysics"),this.setCurrentModelPhysics=this._createClientCall("SetCurrentModelPhysics"),this.ndiConfig=this._createClientCall("NDIConfig"),this.itemList=this._createClientCall("ItemList"),this.itemLoad=this._createClientCall("ItemLoad"),this.itemUnload=this._createClientCall("ItemUnload"),this.itemAnimationControl=this._createClientCall("ItemAnimationControl"),this.itemMove=this._createClientCall("ItemMove"),this.artMeshSelection=this._createClientCall("ArtMeshSelection",18e5),this.events=Object.seal({test:this._createEventSubCalls("Test"),modelLoaded:this._createEventSubCalls("ModelLoaded"),trackingStatusChanged:this._createEventSubCalls("TrackingStatusChanged"),backgroundChanged:this._createEventSubCalls("BackgroundChanged"),modelConfigChanged:this._createEventSubCalls("ModelConfigChanged"),modelMoved:this._createEventSubCalls("ModelMoved"),modelOutline:this._createEventSubCalls("ModelOutline")}),this._eventSubscription=this._createClientCall("EventSubscription"),(0,c.validate)(t,"options",["object",{authTokenGetter:"function",authTokenSetter:"function",pluginDeveloper:"string",pluginName:"string",pluginIcon:["optional","string"],url:["optional","string"],port:["optional","number"],webSocketFactory:["optional","function"]}]),this._authTokenGetter=t.authTokenGetter,this._authTokenSetter=t.authTokenSetter,this._pluginName=t.pluginName,this._pluginDeveloper=t.pluginDeveloper,this._pluginIcon=t.pluginIcon,this._port=null!==(e=t.port)&&void 0!==e?e:8001,this._url=null!==(n=t.url)&&void 0!==n?n:"ws://localhost:".concat(this._port);var o=t.webSocketFactory?null:(0,u.getWebSocketImpl)();this._webSocketFactory=null!==(r=t.webSocketFactory)&&void 0!==r?r:function(t){return new o(t)},this._webSocket=this._webSocketFactory(this._url),this._reconnect()}return Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnecting",{get:function(){return this._isConnecting},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e){(0,c.validate)(t,"type",["stringEnum",["connect","disconnect","error"]]),(0,c.validate)(e,"handler","function"),"connect"!==t||this._connectHandlers.find((function(t){return t===e}))||this._connectHandlers.push(e),"disconnect"!==t||this._disconnectHandlers.find((function(t){return t===e}))||this._disconnectHandlers.push(e),"error"!==t||this._errorHandlers.find((function(t){return t===e}))||this._errorHandlers.push(e)},t.prototype.off=function(t,e){(0,c.validate)(t,"type",["stringEnum",["connect","disconnect","error"]]),(0,c.validate)(e,"handler","function"),"connect"===t&&this._connectHandlers.find((function(t){return t===e}))&&this._connectHandlers.splice(this._connectHandlers.findIndex((function(t){return t===e})),1),"disconnect"===t&&this._disconnectHandlers.find((function(t){return t===e}))&&this._disconnectHandlers.splice(this._disconnectHandlers.findIndex((function(t){return t===e})),1),"error"===t&&this._errorHandlers.find((function(t){return t===e}))&&this._errorHandlers.splice(this._errorHandlers.findIndex((function(t){return t===e})),1)},t.prototype.disconnect=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return this._shouldReconnect=!1,this._webSocket.close(),[2]}))}))},t.prototype._createClientCall=function(t,e){var n=this;return void 0===e&&(e=1e3),function(r,o){return new Promise((function(c,u){var h,l=(0,a.generateID)(16),d=(0,i.makeRequestMsg)(t,l,null!=r?r:{}),p={callback:function(e){var n,r;e.requestID===l&&(p.remove=!0,clearTimeout(p.timeout),(0,i.msgIsResponse)(e,t)?c(null!==(n=e.data)&&void 0!==n?n:{}):(0,i.msgIsError)(e)?u(new i.VTubeStudioError(null!==(r=e.data)&&void 0!==r?r:{},l)):u(new i.VTubeStudioError({errorID:s.ErrorCode.InternalClientError,message:"The response from VTube Studio was an unexpected type: ".concat(JSON.stringify(e.messageType))},l)))},type:t,request:d,timeout:setTimeout((function(){p.remove=!0,u(new i.VTubeStudioError({errorID:s.ErrorCode.InternalClientError,message:"The request timed out."},l))}),null!==(h=null==o?void 0:o.timeout)&&void 0!==h?h:e),remove:!1};n._endpointHandlers.push(p),1===n._webSocket.readyState&&n._webSocket.send(JSON.stringify(d))}))}},t.prototype._createEventSubCalls=function(t){var e=this;return{subscribe:function(n,s){return r(e,void 0,void 0,(function(){var e,r;return o(this,(function(o){switch(o.label){case 0:return[4,this._eventSubscription({config:null!=s?s:{},eventName:"".concat(t,"Event"),subscribe:!0})];case 1:return o.sent(),e={callback:function(e){var r;(0,i.msgIsEvent)(e,t)&&n(null!==(r=e.data)&&void 0!==r?r:{})},type:t,config:null!=s?s:{},remove:!1},r=this._eventHandlers.find((function(e){return e.type===t})),this._eventHandlers.push(e),r?(r.remove=!0,[2,!1]):[2,!0]}}))}))},unsubscribe:function(){return r(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=this._eventHandlers.find((function(e){return e.type===t})))?[4,this._eventSubscription({config:e.config,eventName:"".concat(t,"Event"),subscribe:!1})]:[3,2];case 1:return n.sent(),e.remove=!0,[2,!0];case 2:return[2,!1]}}))}))}}},t.prototype._reconnect=function(){var t=this;this._isConnecting=!0,this._webSocket.addEventListener("message",(function(e){var n=e.data;try{for(var r=JSON.parse(n),o=0,i=t._endpointHandlers;o<i.length;o++){i[o].callback(r)}for(var s=0,a=t._eventHandlers;s<a.length;s++){a[s].callback(r)}for(var c=t._endpointHandlers.length-1;c>=0;c--)t._endpointHandlers[c].remove&&t._endpointHandlers.splice(c,1);for(c=t._eventHandlers.length-1;c>=0;c--)t._eventHandlers[c].remove&&t._eventHandlers.splice(c,1)}catch(e){for(var u=0,h=t._errorHandlers;u<h.length;u++){(0,h[u])(e)}}})),this._webSocket.addEventListener("close",(function(){return r(t,void 0,void 0,(function(){return o(this,(function(t){return this._disconnect(),[2]}))}))})),this._webSocket.addEventListener("error",(function(){t._webSocket.close()})),this._webSocket.addEventListener("open",(function(){return r(t,void 0,void 0,(function(){var t,e,n,r,i,s,a,c,u,h,l,d,p,f,m,y,g,v,b,C=this;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,11,,12]),t=this._pluginName,e=this._pluginDeveloper,n=this._pluginIcon,[4,this.apiState()];case 1:if(r=o.sent(),i=r.active,s=r.currentSessionAuthenticated,!i)throw new Error("VTube Studio Plugin API is not enabled.");if(s)return[3,9];o.label=2;case 2:return o.trys.push([2,5,,9]),[4,this._authTokenGetter()];case 3:if(!(c=o.sent()))throw new Error("Missing authentication token");return[4,this.authentication({pluginName:t,pluginDeveloper:e,authenticationToken:c})];case 4:if(a=o.sent(),h=a.authenticated,l=a.reason,!h)throw new Error("Authentication with VTube Studio failed: ".concat(l));return[3,9];case 5:return o.sent(),[4,this.authenticationToken({pluginName:t,pluginDeveloper:e,pluginIcon:n})];case 6:return c=o.sent().authenticationToken,[4,this.authentication({pluginName:t,pluginDeveloper:e,authenticationToken:c})];case 7:if(u=o.sent(),h=u.authenticated,l=u.reason,!h)throw new Error("Authentication with VTube Studio failed: ".concat(l));return[4,this._authTokenSetter(c)];case 8:return o.sent(),[3,9];case 9:for(d=0,p=this._endpointHandlers;d<p.length;d++)b=p[d],this._webSocket.send(JSON.stringify(b.request));return[4,Promise.all(this._eventHandlers.map((function(t){return C._eventSubscription({config:t.config,eventName:"".concat(t.type,"Event"),subscribe:!0})})))];case 10:for(o.sent(),this._isConnecting=!1,this._isConnected=!0,f=0,m=this._connectHandlers;f<m.length;f++)(b=m[f])();return[3,12];case 11:for(y=o.sent(),g=0,v=this._errorHandlers;g<v.length;g++)(b=v[g])(y);return this._webSocket.close(),[3,12];case 12:return[2]}}))}))}))},t.prototype._disconnect=function(){return r(this,void 0,void 0,(function(){var t,e,n=this;return o(this,(function(r){switch(r.label){case 0:if(this._isConnecting=!1,this._isConnected)for(this._isConnected=!1,t=0,e=this._disconnectHandlers;t<e.length;t++)(0,e[t])();return this._shouldReconnect?[4,(0,a.wait)(5e3)]:[2];case 1:return r.sent(),setTimeout((function(){n._isConnecting||n._isConnected||(n._webSocket=n._webSocketFactory(n._url),n._reconnect())}),0),[2]}}))}))},t}();e.ApiClient=h},"2qj+":function(t,e,n){"use strict";n.d(e,"a",(function(){return Y}));var r={};n.r(r),n.d(r,"protocol",(function(){return x})),n.d(r,"PacketType",(function(){return D})),n.d(r,"Encoder",(function(){return q})),n.d(r,"Decoder",(function(){return j}));var o=n("NLq0"),i=n("KcKF"),s=n("M+gP");let a=!1;try{a="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const c=a;var u=n("IKTr");function h(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||c))return new XMLHttpRequest}catch(t){}if(!e)try{return new(u.a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}var l=n("sAfb"),d=n("r39u");function p(){}const f=null!=new h({xdomain:!1}).responseType;class m extends o.a{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port}const e=t&&t.forceBase64;this.supportsBinary=f&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){Object(s.c)(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,Object(s.f)(t,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Object(i.a)()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new y(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(t,e)=>{this.onError("xhr post error",t,e)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t,e)=>{this.onError("xhr poll error",t,e)}),this.pollXhr=t}}class y extends l.a{constructor(t,e){super(),Object(d.b)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=void 0!==e.data?e.data:null,this.create()}create(){var t;const e=Object(d.c)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const n=this.xhr=new h(e);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&n.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}null===(t=this.opts.cookieJar)||void 0===t||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var t;3===n.readyState&&(null===(t=this.opts.cookieJar)||void 0===t||t.parseCookies(n)),4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof n.status?n.status:0)},0))},n.send(this.data)}catch(t){return void this.setTimeoutFn(()=>{this.onError(t)},0)}"undefined"!=typeof document&&(this.index=y.requestsCount++,y.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=p,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete y.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(y.requestsCount=0,y.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",g);else if("function"==typeof addEventListener){const t="onpagehide"in u.a?"pagehide":"unload";addEventListener(t,g,!1)}function g(){for(let t in y.requests)y.requests.hasOwnProperty(t)&&y.requests[t].abort()}var v=n("H0mi"),b=n("dEqb");function C(t,e){return"message"===t.type&&"string"!=typeof t.data&&e[0]>=48&&e[0]<=54}class w extends o.a{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>this.onClose()),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const e=t.readable.getReader();let n;this.writer=t.writable.getWriter();const r=()=>{e.read().then(({done:t,value:e})=>{t||(n||1!==e.byteLength||54!==e[0]?(this.onPacket(Object(s.b)(e,n,"arraybuffer")),n=!1):n=!0,r())})};r();const o=this.query.sid?`0{"sid":"${this.query.sid}"}`:"0";this.writer.write((new TextEncoder).encode(o)).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],r=e===t.length-1;Object(s.e)(n,t=>{C(n,t)&&this.writer.write(Uint8Array.of(54)),this.writer.write(t).then(()=>{r&&Object(b.c)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})})}}doClose(){var t;null===(t=this.transport)||void 0===t||t.close()}}const _={websocket:v.a,webtransport:w,polling:m};var k=n("meqH");const E=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,I=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function N(t){const e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let o=E.exec(t||""),i={},s=14;for(;s--;)i[I[s]]=o[s]||"";return-1!=n&&-1!=r&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(t,e){const n=e.replace(/\/{2,9}/g,"/").split("/");"/"!=e.slice(0,1)&&0!==e.length||n.splice(0,1);"/"==e.slice(-1)&&n.splice(n.length-1,1);return n}(0,i.path),i.queryKey=function(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(n[e]=r)})),n}(0,i.query),i}class T extends l.a{constructor(t,e={}){super(),this.writeBuffer=[],t&&"object"==typeof t&&(e=t,t=null),t?(t=N(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=N(e.host).host),Object(d.b)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=Object(k.a)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=s.g,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new _[t](n)}open(){let t;if(this.opts.rememberUpgrade&&T.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(t){let e=this.createTransport(t),n=!1;T.priorWebsocketSuccess=!1;const r=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;T.priorWebsocketSuccess="websocket"===e.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}}))};function o(){n||(n=!0,u(),e.close(),e=null)}const i=t=>{const n=new Error("probe error: "+t);n.transport=e.name,o(),this.emitReserved("upgradeError",n)};function s(){i("transport closed")}function a(){i("socket closed")}function c(t){e&&t.name!==e.name&&o()}const u=()=>{e.removeListener("open",r),e.removeListener("error",i),e.removeListener("close",s),this.off("close",a),this.off("upgrading",c)};e.once("open",r),e.once("error",i),e.once("close",s),this.once("close",a),this.once("upgrading",c),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==t?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onOpen(){if(this.readyState="open",T.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){const n=this.writeBuffer[e].data;if(n&&(t+=Object(d.a)(n)),e>0&&t>this.maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){T.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const r=t.length;for(;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}T.protocol=s.g;T.protocol;const S="function"==typeof ArrayBuffer,O=Object.prototype.toString,R="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===O.call(Blob),A="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===O.call(File);function P(t){return S&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||R&&t instanceof Blob||A&&t instanceof File}function L(t){const e=[],n=t.data,r=t;return r.data=function t(e,n){if(!e)return e;if(P(e)){const t={_placeholder:!0,num:n.length};return n.push(e),t}if(Array.isArray(e)){const r=new Array(e.length);for(let o=0;o<e.length;o++)r[o]=t(e[o],n);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t(e[o],n));return r}return e}(n,e),r.attachments=e.length,{packet:r,buffers:e}}function M(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<n.length)return n[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=t(e[r],n);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=t(e[r],n));return e}(t.data,e),delete t.attachments,t}const F=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],x=5;var D;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(D||(D={}));class q{constructor(t){this.replacer=t}encode(t){return t.type!==D.EVENT&&t.type!==D.ACK||!function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}if(P(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return!0;return!1}(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===D.EVENT?D.BINARY_EVENT:D.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==D.BINARY_EVENT&&t.type!==D.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=L(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}function B(t){return"[object Object]"===Object.prototype.toString.call(t)}class j extends l.a{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");e=this.decodeString(t);const n=e.type===D.BINARY_EVENT;n||e.type===D.BINARY_ACK?(e.type=n?D.EVENT:D.ACK,this.reconstructor=new H(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e)}else{if(!P(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===D[n.type])throw new Error("unknown packet type "+n.type);if(n.type===D.BINARY_EVENT||n.type===D.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const o=t.substring(r,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}n.nsp=t.substring(r,e)}else n.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(!j.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case D.CONNECT:return B(e);case D.DISCONNECT:return void 0===e;case D.CONNECT_ERROR:return"string"==typeof e||B(e);case D.EVENT:case D.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===F.indexOf(e[0]));case D.ACK:case D.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class H{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=M(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function V(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const U=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class K extends l.a{constructor(t,e,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[V(t,"open",this.onopen.bind(this)),V(t,"packet",this.onpacket.bind(this)),V(t,"error",this.onerror.bind(this)),V(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(U.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(e.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(e),this;const n={type:D.EVENT,data:e,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,r=e.pop();this._registerAckCallback(t,r),n.id=t}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,e){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[t]=e);const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))},r);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(o),e.apply(this,[null,...t])}}emitWithAck(t,...e){const n=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((r,o)=>{e.push((t,e)=>n?t?o(t):r(e):r(t)),this.emit(t,...e)})}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((t,...r)=>{if(n!==this._queue[0])return;return null!==t?n.tryCount>this._opts.retries&&(this._queue.shift(),e&&e(t)):(this._queue.shift(),e&&e(null,...r)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||0===this._queue.length)return;const e=this._queue[0];e.pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:D.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case D.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case D.EVENT:case D.BINARY_EVENT:this.onevent(t);break;case D.ACK:case D.BINARY_ACK:this.onack(t);break;case D.DISCONNECT:this.ondisconnect();break;case D.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let n=!1;return function(...r){n||(n=!0,e.packet({type:D.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:D.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function W(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}W.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},W.prototype.reset=function(){this.attempts=0},W.prototype.setMin=function(t){this.ms=t},W.prototype.setMax=function(t){this.max=t},W.prototype.setJitter=function(t){this.jitter=t};class J extends l.a{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,Object(d.b)(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=e.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new W({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const o=e.parser||r;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new T(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=V(e,"open",(function(){n.onopen(),t&&t()})),o=e=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",e),t?t(e):this.maybeReconnectOnOpen()},i=V(e,"error",o);if(!1!==this._timeout){const t=this._timeout,n=this.setTimeoutFn(()=>{r(),o(new Error("timeout")),e.close()},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(V(t,"ping",this.onping.bind(this)),V(t,"data",this.ondata.bind(this)),V(t,"error",this.onerror.bind(this)),V(t,"close",this.onclose.bind(this)),V(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){Object(b.c)(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new K(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const G={};function Y(t,e){"object"==typeof t&&(e=t,t=void 0);const n=function(t,e="",n){let r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),r=N(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),r=n.source,o=n.id,i=n.path,s=G[o]&&i in G[o].nsps;let a;return e.forceNew||e["force new connection"]||!1===e.multiplex||s?a=new J(r,e):(G[o]||(G[o]=new J(r,e)),a=G[o]),n.query&&!e.query&&(e.query=n.queryKey),a.socket(n.path,e)}Object.assign(Y,{Manager:J,Socket:K,io:Y,connect:Y})},B6y2:function(t,e,n){var r=n("I+eb"),o=n("b1O7").values;r({target:"Object",stat:!0},{values:function(t){return o(t)}})},H0mi:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var r=n("NLq0"),o=n("KcKF"),i=n("r39u"),s=n("dEqb"),a=n("M+gP");const c="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class u extends r.a{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=c?{}:Object(i.c)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=s.d&&!c?e?new s.a(t,e):new s.a(t):new s.a(t,e,n)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||s.b,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;Object(a.d)(r,this.supportsBinary,e=>{const n={};if(!s.d&&(r.options&&(n.compress=r.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?t.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(n.compress=!1)}try{s.d?this.ws.send(e):this.ws.send(e,n)}catch(t){}o&&Object(s.c)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Object(o.a)()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!s.a}}}).call(this,n("HDXh").Buffer)},"HaE+":function(t,e,n){"use strict";function r(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var s=t.apply(e,n);function a(t){r(s,o,i,a,c,"next",t)}function c(t){r(s,o,i,a,c,"throw",t)}a(void 0)}))}}n.d(e,"a",(function(){return o}))},HcV3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RestrictedRawKey=e.HotkeyType=e.ErrorCode=void 0,function(t){t[t.Unknown=NaN]="Unknown",t[t.InternalClientError=-100]="InternalClientError",t[t.Unset=-1]="Unset",t[t.InternalServerError=0]="InternalServerError",t[t.APIAccessDeactivated=1]="APIAccessDeactivated",t[t.JSONInvalid=2]="JSONInvalid",t[t.APINameInvalid=3]="APINameInvalid",t[t.APIVersionInvalid=4]="APIVersionInvalid",t[t.RequestIDInvalid=5]="RequestIDInvalid",t[t.RequestTypeMissingOrEmpty=6]="RequestTypeMissingOrEmpty",t[t.RequestTypeUnknown=7]="RequestTypeUnknown",t[t.RequestRequiresAuthetication=8]="RequestRequiresAuthetication",t[t.TokenRequestDenied=50]="TokenRequestDenied",t[t.TokenRequestCurrentlyOngoing=51]="TokenRequestCurrentlyOngoing",t[t.TokenRequestPluginNameInvalid=52]="TokenRequestPluginNameInvalid",t[t.TokenRequestDeveloperNameInvalid=53]="TokenRequestDeveloperNameInvalid",t[t.TokenRequestPluginIconInvalid=54]="TokenRequestPluginIconInvalid",t[t.AuthenticationTokenMissing=100]="AuthenticationTokenMissing",t[t.AuthenticationPluginNameMissing=101]="AuthenticationPluginNameMissing",t[t.AuthenticationPluginDeveloperMissing=102]="AuthenticationPluginDeveloperMissing",t[t.ModelIDMissing=150]="ModelIDMissing",t[t.ModelIDInvalid=151]="ModelIDInvalid",t[t.ModelIDNotFound=152]="ModelIDNotFound",t[t.ModelLoadCooldownNotOver=153]="ModelLoadCooldownNotOver",t[t.CannotCurrentlyChangeModel=154]="CannotCurrentlyChangeModel",t[t.HotkeyQueueFull=200]="HotkeyQueueFull",t[t.HotkeyExecutionFailedBecauseNoModelLoaded=201]="HotkeyExecutionFailedBecauseNoModelLoaded",t[t.HotkeyIDNotFoundInModel=202]="HotkeyIDNotFoundInModel",t[t.HotkeyCooldownNotOver=203]="HotkeyCooldownNotOver",t[t.HotkeyIDFoundButHotkeyDataInvalid=204]="HotkeyIDFoundButHotkeyDataInvalid",t[t.HotkeyExecutionFailedBecauseBadState=205]="HotkeyExecutionFailedBecauseBadState",t[t.HotkeyUnknownExecutionFailure=206]="HotkeyUnknownExecutionFailure",t[t.HotkeyExecutionFailedBecauseLive2DItemNotFound=207]="HotkeyExecutionFailedBecauseLive2DItemNotFound",t[t.HotkeyExecutionFailedBecauseLive2DItemsDoNotSupportThisHotkeyType=208]="HotkeyExecutionFailedBecauseLive2DItemsDoNotSupportThisHotkeyType",t[t.ColorTintRequestNoModelLoaded=250]="ColorTintRequestNoModelLoaded",t[t.ColorTintRequestMatchOrColorMissing=251]="ColorTintRequestMatchOrColorMissing",t[t.ColorTintRequestInvalidColorValue=252]="ColorTintRequestInvalidColorValue",t[t.MoveModelRequestNoModelLoaded=300]="MoveModelRequestNoModelLoaded",t[t.MoveModelRequestMissingFields=301]="MoveModelRequestMissingFields",t[t.MoveModelRequestValuesOutOfRange=302]="MoveModelRequestValuesOutOfRange",t[t.CustomParamNameInvalid=350]="CustomParamNameInvalid",t[t.CustomParamValuesInvalid=351]="CustomParamValuesInvalid",t[t.CustomParamAlreadyCreatedByOtherPlugin=352]="CustomParamAlreadyCreatedByOtherPlugin",t[t.CustomParamExplanationTooLong=353]="CustomParamExplanationTooLong",t[t.CustomParamDefaultParamNameNotAllowed=354]="CustomParamDefaultParamNameNotAllowed",t[t.CustomParamLimitPerPluginExceeded=355]="CustomParamLimitPerPluginExceeded",t[t.CustomParamLimitTotalExceeded=356]="CustomParamLimitTotalExceeded",t[t.CustomParamDeletionNameInvalid=400]="CustomParamDeletionNameInvalid",t[t.CustomParamDeletionNotFound=401]="CustomParamDeletionNotFound",t[t.CustomParamDeletionCreatedByOtherPlugin=402]="CustomParamDeletionCreatedByOtherPlugin",t[t.CustomParamDeletionCannotDeleteDefaultParam=403]="CustomParamDeletionCannotDeleteDefaultParam",t[t.InjectDataNoDataProvided=450]="InjectDataNoDataProvided",t[t.InjectDataValueInvalid=451]="InjectDataValueInvalid",t[t.InjectDataWeightInvalid=452]="InjectDataWeightInvalid",t[t.InjectDataParamNameNotFound=453]="InjectDataParamNameNotFound",t[t.InjectDataParamControlledByOtherPlugin=454]="InjectDataParamControlledByOtherPlugin",t[t.InjectDataModeUnknown=455]="InjectDataModeUnknown",t[t.ParameterValueRequestParameterNotFound=500]="ParameterValueRequestParameterNotFound",t[t.NDIConfigCooldownNotOver=550]="NDIConfigCooldownNotOver",t[t.NDIConfigResolutionInvalid=551]="NDIConfigResolutionInvalid",t[t.ExpressionStateRequestInvalidFilename=600]="ExpressionStateRequestInvalidFilename",t[t.ExpressionStateRequestFileNotFound=601]="ExpressionStateRequestFileNotFound",t[t.ExpressionActivationRequestInvalidFilename=650]="ExpressionActivationRequestInvalidFilename",t[t.ExpressionActivationRequestFileNotFound=651]="ExpressionActivationRequestFileNotFound",t[t.ExpressionActivationRequestNoModelLoaded=652]="ExpressionActivationRequestNoModelLoaded",t[t.SetCurrentModelPhysicsRequestNoModelLoaded=700]="SetCurrentModelPhysicsRequestNoModelLoaded",t[t.SetCurrentModelPhysicsRequestModelHasNoPhysics=701]="SetCurrentModelPhysicsRequestModelHasNoPhysics",t[t.SetCurrentModelPhysicsRequestPhysicsControlledByOtherPlugin=702]="SetCurrentModelPhysicsRequestPhysicsControlledByOtherPlugin",t[t.SetCurrentModelPhysicsRequestNoOverridesProvided=703]="SetCurrentModelPhysicsRequestNoOverridesProvided",t[t.SetCurrentModelPhysicsRequestPhysicsGroupIDNotFound=704]="SetCurrentModelPhysicsRequestPhysicsGroupIDNotFound",t[t.SetCurrentModelPhysicsRequestNoOverrideValueProvided=705]="SetCurrentModelPhysicsRequestNoOverrideValueProvided",t[t.SetCurrentModelPhysicsRequestDuplicatePhysicsGroupID=706]="SetCurrentModelPhysicsRequestDuplicatePhysicsGroupID",t[t.ItemFileNameMissing=750]="ItemFileNameMissing",t[t.ItemFileNameNotFound=751]="ItemFileNameNotFound",t[t.ItemLoadLoadCooldownNotOver=752]="ItemLoadLoadCooldownNotOver",t[t.CannotCurrentlyLoadItem=753]="CannotCurrentlyLoadItem",t[t.CannotLoadItemSceneFull=754]="CannotLoadItemSceneFull",t[t.ItemOrderInvalid=755]="ItemOrderInvalid",t[t.ItemOrderAlreadyTaken=756]="ItemOrderAlreadyTaken",t[t.ItemLoadValuesInvalid=757]="ItemLoadValuesInvalid",t[t.CannotCurrentlyUnloadItem=800]="CannotCurrentlyUnloadItem",t[t.ItemAnimationControlInstanceIDNotFound=850]="ItemAnimationControlInstanceIDNotFound",t[t.ItemAnimationControlUnsupportedItemType=851]="ItemAnimationControlUnsupportedItemType",t[t.ItemAnimationControlAutoStopFramesInvalid=852]="ItemAnimationControlAutoStopFramesInvalid",t[t.ItemAnimationControlTooManyAutoStopFrames=853]="ItemAnimationControlTooManyAutoStopFrames",t[t.ItemAnimationControlSimpleImageDoesNotSupportAnim=854]="ItemAnimationControlSimpleImageDoesNotSupportAnim",t[t.ItemMoveRequestInstanceIDNotFound=900]="ItemMoveRequestInstanceIDNotFound",t[t.ItemMoveRequestInvalidFadeMode=901]="ItemMoveRequestInvalidFadeMode",t[t.ItemMoveRequestItemOrderTakenOrInvalid=902]="ItemMoveRequestItemOrderTakenOrInvalid",t[t.ItemMoveRequestCannotCurrentlyChangeOrder=903]="ItemMoveRequestCannotCurrentlyChangeOrder"}(e.ErrorCode||(e.ErrorCode={})),function(t){t[t.Unset=-1]="Unset",t[t.TriggerAnimation=0]="TriggerAnimation",t[t.ChangeIdleAnimation=1]="ChangeIdleAnimation",t[t.ToggleExpression=2]="ToggleExpression",t[t.RemoveAllExpressions=3]="RemoveAllExpressions",t[t.MoveModel=4]="MoveModel",t[t.ChangeBackground=5]="ChangeBackground",t[t.ReloadMicrophone=6]="ReloadMicrophone",t[t.ReloadTextures=7]="ReloadTextures",t[t.CalibrateCam=8]="CalibrateCam",t[t.ChangeVTSModel=9]="ChangeVTSModel",t[t.TakeScreenshot=10]="TakeScreenshot",t[t.ScreenColorOverlay=11]="ScreenColorOverlay",t[t.RemoveAllItems=12]="RemoveAllItems",t[t.ToggleItemScene=13]="ToggleItemScene",t[t.DownloadRandomWorkshopItem=14]="DownloadRandomWorkshopItem",t[t.ExecuteItemAction=15]="ExecuteItemAction",t[t.ArtMeshColorPreset=16]="ArtMeshColorPreset",t[t.ToggleTracker=17]="ToggleTracker"}(e.HotkeyType||(e.HotkeyType={})),function(t){t[t.LeftMouseButton=1]="LeftMouseButton",t[t.RightMouseButton=2]="RightMouseButton",t[t.MiddleMouseButton=4]="MiddleMouseButton",t[t.Tab=9]="Tab",t[t.CapsLock=20]="CapsLock",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.Print=42]="Print",t[t.Delete=46]="Delete",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.N0=48]="N0",t[t.N1=49]="N1",t[t.N2=50]="N2",t[t.N3=51]="N3",t[t.N4=52]="N4",t[t.N5=53]="N5",t[t.N6=54]="N6",t[t.N7=55]="N7",t[t.N8=56]="N8",t[t.N9=57]="N9",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.LeftWindows=91]="LeftWindows",t[t.RightWindows=92]="RightWindows",t[t.Numpad0=96]="Numpad0",t[t.Numpad1=97]="Numpad1",t[t.Numpad2=98]="Numpad2",t[t.Numpad3=99]="Numpad3",t[t.Numpad4=100]="Numpad4",t[t.Numpad5=101]="Numpad5",t[t.Numpad6=102]="Numpad6",t[t.Numpad7=103]="Numpad7",t[t.Numpad8=104]="Numpad8",t[t.Numpad9=105]="Numpad9",t[t.Multiply=106]="Multiply",t[t.Add=107]="Add",t[t.Subtract=109]="Subtract",t[t.Decimal=110]="Decimal",t[t.Divide=111]="Divide",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.F13=124]="F13",t[t.F14=125]="F14",t[t.F15=126]="F15",t[t.F16=127]="F16",t[t.F17=128]="F17",t[t.F18=129]="F18",t[t.F19=130]="F19",t[t.F20=131]="F20",t[t.F21=132]="F21",t[t.F22=133]="F22",t[t.F23=134]="F23",t[t.F24=135]="F24",t[t.NumLock=144]="NumLock",t[t.ScrollLock=145]="ScrollLock",t[t.LeftShift=160]="LeftShift",t[t.RightShift=161]="RightShift",t[t.LeftControl=162]="LeftControl",t[t.RightControl=163]="RightControl",t[t.Alt=164]="Alt"}(e.RestrictedRawKey||(e.RestrictedRawKey={}))},IKTr:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},KcKF:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={};let i,s=0,a=0;function c(t){let e="";do{e=r[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function u(){const t=c(+new Date);return t!==i?(s=0,i=t):t+"."+c(s++)}for(;a<64;a++)o[r[a]]=a},"M+gP":function(t,e,n){"use strict";n.d(e,"b",(function(){return E})),n.d(e,"g",(function(){return I})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return w})),n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return _}));const r=Object.create(null);r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";const o=Object.create(null);Object.keys(r).forEach(t=>{o[r[t]]=t});const i={type:"error",data:"parser error"},s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),a="function"==typeof ArrayBuffer,c=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,u=({type:t,data:e},n,o)=>s&&e instanceof Blob?n?o(e):h(e,o):a&&(e instanceof ArrayBuffer||c(e))?n?o(e):h(new Blob([e]),o):o(r[t]+(e||"")),h=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+(t||""))},n.readAsDataURL(t)};function l(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let d;function p(t,e){return s&&t.data instanceof Blob?t.data.arrayBuffer().then(l).then(e):a&&(t.data instanceof ArrayBuffer||c(t.data))?e(l(t.data)):void u(t,!1,t=>{d||(d=new TextEncoder),e(d.encode(t))})}const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<f.length;t++)m[f.charCodeAt(t)]=t;const y="function"==typeof ArrayBuffer,g=(t,e)=>{if("string"!=typeof t)return{type:"message",data:b(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:v(t.substring(1),e)};return o[n]?t.length>1?{type:o[n],data:t.substring(1)}:{type:o[n]}:i},v=(t,e)=>{if(y){const n=(t=>{let e,n,r,o,i,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);const u=new ArrayBuffer(s),h=new Uint8Array(u);for(e=0;e<a;e+=4)n=m[t.charCodeAt(e)],r=m[t.charCodeAt(e+1)],o=m[t.charCodeAt(e+2)],i=m[t.charCodeAt(e+3)],h[c++]=n<<2|r>>4,h[c++]=(15&r)<<4|o>>2,h[c++]=(3&o)<<6|63&i;return u})(t);return b(n,e)}return{base64:!0,data:t}},b=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},C=String.fromCharCode(30),w=(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach((t,i)=>{u(t,!1,t=>{r[i]=t,++o===n&&e(r.join(C))})})},_=(t,e)=>{const n=t.split(C),r=[];for(let t=0;t<n.length;t++){const o=g(n[t],e);if(r.push(o),"error"===o.type)break}return r};let k;function E(t,e,n){k||(k=new TextDecoder);const r=e||t[0]<48||t[0]>54;return g(r?t:k.decode(t),n)}const I=4},NLq0:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("M+gP"),o=n("sAfb"),i=n("r39u"),s=n("meqH");class a extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class c extends o.a{constructor(t){super(),this.writable=!1,Object(i.b)(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,n){return super.emitReserved("error",new a(t,e,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Object(r.a)(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){const t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){const e=Object(s.b)(t);return e.length?"?"+e:""}}},"SKd+":function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.msgIsError=e.msgIsEvent=e.msgIsResponse=e.makeRequestMsg=e.VTubeStudioError=void 0;var i=n("HcV3"),s=function(t){function e(e,n){var r,o=this.constructor,s=this;return(s=t.call(this,"".concat(e.message," (Error Code: ").concat(e.errorID," ").concat(null!==(r=i.ErrorCode[e.errorID])&&void 0!==r?r:i.ErrorCode.Unknown,") (Request ID: ").concat(n,")"))||this).data=e,s.requestID=n,s.name=s.constructor.name,Object.setPrototypeOf(s,o.prototype),s}return o(e,t),e}(Error);e.VTubeStudioError=s,e.makeRequestMsg=function(t,e,n){return{apiName:"VTubeStudioPublicAPI",apiVersion:"1.0",timestamp:Date.now(),messageType:"".concat(t,"Request"),requestID:e,data:n}},e.msgIsResponse=function(t,e){return t.messageType==="".concat(e,"Response")},e.msgIsEvent=function(t,e){return t.messageType==="".concat(e,"Event")},e.msgIsError=function(t){return"APIError"===t.messageType}},T63A:function(t,e,n){var r=n("I+eb"),o=n("b1O7").entries;r({target:"Object",stat:!0},{entries:function(t){return o(t)}})},TOfK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RestrictedRawKey=e.HotkeyType=e.ErrorCode=e.VTubeStudioError=e.ApiClient=void 0;var r=n("1lse");Object.defineProperty(e,"ApiClient",{enumerable:!0,get:function(){return r.ApiClient}});var o=n("SKd+");Object.defineProperty(e,"VTubeStudioError",{enumerable:!0,get:function(){return o.VTubeStudioError}});var i=n("HcV3");Object.defineProperty(e,"ErrorCode",{enumerable:!0,get:function(){return i.ErrorCode}}),Object.defineProperty(e,"HotkeyType",{enumerable:!0,get:function(){return i.HotkeyType}}),Object.defineProperty(e,"RestrictedRawKey",{enumerable:!0,get:function(){return i.RestrictedRawKey}})},b1O7:function(t,e,n){var r=n("g6v/"),o=n("4zBA"),i=n("33Wh"),s=n("/GqU"),a=o(n("0eef").f),c=o([].push),u=function(t){return function(e){for(var n,o=s(e),u=i(o),h=u.length,l=0,d=[];h>l;)n=u[l++],r&&!a(o,n)||c(d,t?[n,o[n]]:o[n]);return d}};t.exports={entries:u(!0),values:u(!1)}},dEqb:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return a}));var r=n("IKTr");const o="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),i=r.a.WebSocket||r.a.MozWebSocket,s=!0,a="arraybuffer"},ls82:function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(t){a=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),s=new k(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===h)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(t,n,s),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function l(){}function d(){}function p(){}var f={};a(f,o,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(E([])));y&&y!==e&&n.call(y,o)&&(f=y);var g=p.prototype=l.prototype=Object.create(f);function v(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(o,i){function s(){return new e((function(r,s){!function r(o,i,s,a){var c=u(t[o],t,i);if("throw"!==c.type){var h=c.arg,l=h.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(l).then((function(t){h.value=t,s(h)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}(o,i,r,s)}))}return r=r?r.then(s,s):s()}}function C(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,a(g,"constructor",p),a(p,"constructor",d),d.displayName=a(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},v(b.prototype),a(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new b(c(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},v(g),a(g,s,"Generator"),a(g,o,(function(){return this})),a(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=E,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},meqH:function(t,e,n){"use strict";function r(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function o(t){let e={},n=t.split("&");for(let t=0,r=n.length;t<r;t++){let r=n[t].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}))},r39u:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n("IKTr");function o(t,...e){return e.reduce((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e),{})}const i=r.a.setTimeout,s=r.a.clearTimeout;function a(t,e){e.useNativeTimers?(t.setTimeoutFn=i.bind(r.a),t.clearTimeoutFn=s.bind(r.a)):(t.setTimeoutFn=r.a.setTimeout.bind(r.a),t.clearTimeoutFn=r.a.clearTimeout.bind(r.a))}function c(t){return"string"==typeof t?function(t){let e=0,n=0;for(let r=0,o=t.length;r<o;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))}},sAfb:function(t,e,n){"use strict";function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}n.d(e,"a",(function(){return r})),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},uThP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validate=void 0,e.validate=function t(e,n,r){if("string"==typeof r){if(typeof e!==r)throw new Error("".concat(n," must be a ").concat(r," (got ").concat(typeof e," instead)"))}else if(Array.isArray(r)){var o=r[0],i=r[1];if("nullable"===o)null!==e&&t(e,n,i);else if("optional"===o)void 0!==e&&t(e,n,i);else if("stringEnum"===o){if("string"!=typeof e)throw new Error("".concat(n," must be a string (got ").concat(typeof e," instead)"));if(-1===i.indexOf(e))throw new Error("".concat(n," must be one of the following: ").concat(i.map((function(t){return JSON.stringify(t)})).join(", ")))}else if("numberEnum"===o){if("number"!=typeof e)throw new Error("".concat(n," must be a number (got ").concat(typeof e," instead)"));if(-1===i.indexOf(e))throw new Error("".concat(n," must be one of the following: ").concat(i.map((function(t){return JSON.stringify(t)})).join(", ")))}else if("array"===o){if(!Array.isArray(e))throw new Error("".concat(n," must be an array (got ").concat(typeof e," instead)"));for(var s=0;s<e.length;s++)t(e[s],"".concat(n,"[").concat(s,"]"),i)}else if("object"===o){if("object"!=typeof e)throw new Error("".concat(n," must be an object (got ").concat(typeof e," instead)"));for(var a in i)t(e[a],"".concat(n,".").concat(a),i[a]);for(var a in e)if(!(a in i))throw new Error("".concat(n,".").concat(a," must not be set"))}}}},vQ6T:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.getWebSocketImpl=void 0,e.getWebSocketImpl=function(){var e=void 0;if(e||"undefined"==typeof WebSocket||(e=WebSocket),!e&&"undefined"!=typeof window&&"WebSocket"in window&&(e=window.WebSocket),!e&&void 0!==t&&"WebSocket"in t&&(e=t.WebSocket),!e&&"undefined"!=typeof self&&"WebSocket"in self&&(e=self.WebSocket),!e)throw new Error("Could not locate a WebSocket implementation in your current environment. Please provide a WebSocket factory manually in the constructor options.");return e}}).call(this,n("yLpj"))},wzb2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wait=e.filterFalsy=e.generateID=void 0;var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";e.generateID=function(t){for(var e="",n=0;n<t;n++)e+=r[Math.floor(Math.random()*r.length)%r.length];return e},e.filterFalsy=function(t){return!!t},e.wait=function(t){return new Promise((function(e){setTimeout(e,t)}))}}}]);